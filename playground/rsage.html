<!doctype html>
<head>





















<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
  
  
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js" integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp" crossorigin="anonymous"></script>

 <script>
    document.addEventListener("DOMContentLoaded", function(){
    var tex = document.querySelectorAll('script[type^="math/tex"]');

	for(var i = 0; i < tex.length; ++i)
	    {
		var display = tex[i].getAttribute('type').indexOf('mode=display') > -1;
		
		var math = tex[i].previousSibling;
		math.className = 'katex-render';
		
		var content = tex[i].textContent;
		
		katex.render(content, math, {
		    /* output: html, */
		    displayMode: display,
		    throwOnError: false,
		    trust: true
		});
		
		tex[i].parentNode.removeChild(tex[i]);
		
	    }
    });
  </script>


<script src="js/sidebar.js"></script>




<script defer src="js/search.js"></script>


<script async defer src="https://hypothes.is/embed.js"></script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script src="js/openclosebuttons.js"></script>




<link rel="stylesheet" type="text/css" href="css/iLaTeXen.css">

<script defer src="js/quiz.js"></script>

<script defer src="js/orderquiz.js"></script>


<link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
<script src="https://tikzjax.com/v1/tikzjax.js"></script>


<script defer src="js/bubble.js"></script>



<script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>

<script>
  window.MathJax = 1 /* Disable MathJax */
  sagecell.makeSagecell({
  inputLocation: ".sage",
  linked: false,
  autoeval: true,
  languages : ["r"],
  hide : ["evalButton", "editor", "language", "permalink"]
  });
</script>

</head>
<body><div class="sidenav normalwidth"><button style="border:none; background-color: Transparent;" onclick="showhidemenu()" title="Toggle toc"><span style="font-size: 30px;">&#9776;</span></button><button class="openbs" title="Open buttons">+</button><button class="closebs" title="Close buttons">-</button><ul class="leftmenu" style="display: none;"><li><a class="kap" href="playground.html#eace9cb4-259c-4df8-846a-126a669c401a"><b>1</b> Playground</a></li><a href="#kap1" data-toggle="collapse"><span class="downtick">&#10095</span></a><ul id="kap1" class="collapse"><li><a href="playground.html#05053b54-cc97-4c9b-92ef-09a2c0595f3c">1.1 Example problems</a></li></ul><li><a class="kap" href="sandbox.html#3119e3af-bf7e-4b18-a423-64d0c821a901"><b>2</b> Sandbox</a></li><a href="#kap2" data-toggle="collapse"><span class="downtick">&#10095</span></a><ul id="kap2" class="collapse"><li><a href="sandbox.html#d83065e3-748b-4d7a-9c32-613422ab952f">2.1 Exercises for week 7</a></li></ul><li><a class="kap" href="integration.html#1b310120-0467-46fe-abfa-dd757c5dcf15"><b>3</b> Integration</a></li><a href="#kap3" data-toggle="collapse"><span class="downtick">&#10095</span></a><ul id="kap3" class="collapse"></ul><li><a class="kap" href="rsage.html#3d2bab9c-bd11-4452-bb85-e9702ec7f235"><b>4</b> R in sagecell</a></li><a href="#kap4" data-toggle="collapse"><span class="downtick">&#10095</span></a><ul id="kap4" class="collapse"><li><a href="rsage.html#bbe2b9c2-3e69-4524-aec3-5380e17f457a">4.1 Potential solution</a></li></ul><li><a class="kap" href="limit_slide.html#348db525-9103-479f-94ee-24fed5d1fd29"><b>5</b> A step toward limits</a></li><a href="#kap5" data-toggle="collapse"><span class="downtick">&#10095</span></a><ul id="kap5" class="collapse"></ul><li><a class="kap" href="mentimeter.html#7f8d8db8-fd69-441b-bb9f-e4fe73864060"><b>6</b> Mentimeter</a></li><a href="#kap6" data-toggle="collapse"><span class="downtick">&#10095</span></a><ul id="kap6" class="collapse"></ul><li><a class="kap" href="bibliography.html#d782b62c-4343-4ea1-a7b7-578c6880444b"><b>7</b> Bibliography test</a></li><a href="#kap7" data-toggle="collapse"><span class="downtick">&#10095</span></a><ul id="kap7" class="collapse"></ul></ul></div><div class="main normalmargin"><div style="margin-top:20px"></div><div style="margin-top:20px"></div><h1 id="3d2bab9c-bd11-4452-bb85-e9702ec7f235">4<span style="float:right;">R in sagecell</span></h1>
Below is an example of executing R code in a Sage Cell. There are numerous problems
<ul><li> It seems you must use =, not <- for assignment
  </li><li> You can't use the dollar operator, since QaDiL converts it to mathematics
  </li><li> Several libraries are not available, e.g., plotly
  </li><li> It seems impossible to control the width of a ggplot2 plot
</li></ul>
See further below for a potential solution.
<div class="sage"><script type="text/x-sage">
  library(ggplot2)
  library(dplyr)
  months = c('Maj', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'December')
  booked_2019 = c(9596, 11141, 28172, 8968, 3316, 1696, 505, 447)
  booked_2022 = c(12677, 15140, 33209, 10790, 5066, 2323, 1037, 693)
  bookings_2019 <- data.frame(month = factor(months, levels = months),
                       booked = booked_2019, year = 2019)
  bookings_2022 = data.frame(month = factor(months, levels = months),
                       booked = booked_2022, year = 2022)
  bookings = rbind(bookings_2019, bookings_2022) %>%
    mutate(year = factor(year))
  booked_plot = ggplot(bookings,
                      aes(x = month, y = booked,
                          group = year, colour = year)) +
    geom_point() +
    geom_line() +
    scale_color_brewer(palette = 'Dark2') +
    xlab('MÃ¥ned') +
    ylab('Antal bookinger') +
    theme_classic() +
    theme(aspect.ratio = 4/3)
</script></div><div style="margin-top:20px"></div><span id="sec4.1"></span><h2 id="bbe2b9c2-3e69-4524-aec3-5380e17f457a">4.1 Potential solution</h2>
Here, I embed the same plot, but generated with plotly and saved with saveWidget
from the htmlwidgets package. The plot is embedded using an iframe.<div style="margin-top:20px"></div><div style="margin-top:20px"></div><center>
  
 <iframe src="./img/p1.html" title="plot" width=900 height=600 style="border:none;" ></iframe><div style="margin-top:20px"></div></center><div style="margin-top:20px"></div></div></body>
